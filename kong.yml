# kong.yml - Versão Final e Robusta
_format_version: "3.0"
_comment: "Configuração Kong usando variáveis de ambiente para roteamento interno."

services:
  - name: supabase-auth
    url: ${AUTH_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-auth
        paths:
          - /auth/v1

  - name: supabase-rest
    url: ${REST_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-rest
        paths:
          - /rest/v1
          
  - name: supabase-realtime
    url: ${REALTIME_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-realtime
        paths:
          - /realtime/v1
          
  - name: supabase-storage
    url: ${STORAGE_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-storage
        paths:
          - /storage/v1
          
  - name: supabase-functions
    url: ${FUNCTIONS_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-functions
        paths:
          - /functions/v1
          
  - name: supabase-studio
    url: ${STUDIO_INTERNAL_URL} # Usa a variável do Railway
    routes:
      - name: route-studio
        paths:
          - /
