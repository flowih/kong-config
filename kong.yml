# kong.yml - Versão FINAL com nomes de serviço CORRETOS
_format_version: "3.0"
_comment: "Configuração Kong com endereços internos fixos baseados no painel do Railway."

services:
  # Serviço: Gotrue Auth na porta 9999
  - name: supabase-auth
    url: gotrue-auth-staging.up.railway.app
    routes:
      - name: route-auth
        paths:
          - /auth/v1

  # Serviço: Postgrest na porta 3000
  - name: supabase-rest
    url: http://postgrest.railway.internal:3000
    routes:
      - name: route-rest
        paths:
          - /rest/v1
          
  # Serviço: Supabase Realtime na porta 4000
  - name: supabase-realtime
    url: http://supabase-realtime.railway.internal:4000
    routes:
      - name: route-realtime
        paths:
          - /realtime/v1
          
  # Serviço: storage-api na porta 5000
  - name: supabase-storage
    url: http://storage-api.railway.internal:5000
    routes:
      - name: route-storage
        paths:
          - /storage/v1
          
  # Serviço: dependable-nature na porta 54321 (Assumindo que este seja o Functions)
  - name: supabase-functions
    url: http://dependable-nature.railway.internal:54321
    routes:
      - name: route-functions
        paths:
          - /functions/v1
          
  # Serviço: Supabase Studio na porta 8000
  - name: supabase-studio
    url: http://supabase-studio.railway.internal:8000
    routes:
      - name: route-studio
        paths:
          - /
